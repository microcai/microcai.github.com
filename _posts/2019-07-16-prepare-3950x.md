---
layout: post
title: 准备上 3950x
tags: [AMD, X570]
---





听闻秒天秒低秒 i9 的 3950x 要在9月份发售了, 陪伴我多年的 i7-4790 终于可以退役了. 本来是打算9月进行退役的, 但是亲戚家有孩子今年开学需要用电脑了, 于是我就把电脑送给她了. 这样, 在9 月份到来前, 我就需要准备好一台备用电脑, 一台能随时升级到 3950x 的电脑.



主板呢, 肯定是选 X570 芯片组的, 这样日后只需要换 cpu 即可. 选主板花了不少精力, 因为我不想要 SLI , 不要花冤枉钱给 sli 税. 然后没 sli 意味着显卡插槽是实打实的 x16 而不会一不小心变成 x8 或 x4 . 然后主板上的其他 pcie 都乖乖接 pch 上 不会像某个傻逼主板, 一共5 条 pcie 居然 4条是接 cpu 上的, 要 x4+x4+x4+x4 模式跑 sli 四卡交火. 剩下一条还是 x1 的.  神经病啊, x4 的话显卡性能还能发挥吗? 然后要是加别的扩展卡不是显卡就一定不能  x16 了么.

然后选了好久敲定了几个符合要求的, 最后7月7号晚上9点发售的时候.... 一切的选择都是徒劳的, 直接买了最便宜的首发主板 😂  . 也就是 MSI 的 X570-A PRO

然后是内存, 因为 3950x 是 16核32线程的 cpu , 为了能发挥 cpu 的威力, 编译的时候 make -j32 是一定要的. 这样内存小了就会非常容易 OOM, 发挥不出 32 个框框的实力.  所以选择了买4条 16G 的内存.

找了半天, 16G 的内存只有 3200Mhz 的, 3600 乃至 4000 都只有 8G 单条. 无奈只好接受 3200 的条子了.

SSD 呢, 618 的时候就屯了一条国产ssd. 512G 才四百一.

最后是 cpu 上栽了跟头.



因为考虑到9月份才上 3950x 所以就买了个 APU, 没错, 賊便宜的 ryzen 3 2200G. 才四百多.

然后就翻车了.

无法开机, 内存,主板, cpu , 哪个都可能出问题, 非常的蛋疼, 无法确定到底谁坏了. 插拔插拔插拔插拔插拔无数次都失败告终.

最后去 msi 官网看看, 发现.. 支持的 cpu 列表里, 没有 2200G ..... 

这翻车翻的是猝不及防....

最后买了 2500X 过来. 然后因为没有核显, 只能再买个显卡, 买了个最便宜的 RX580 ... 五百多, 便宜吧. 

然后这个卡又翻车了, 花屏.... 又退回去换了一个新的过来.

真是折腾, 终于在上周日晚上的时候, 全部折腾好了. 能开机了. 

此生第一次用 AMD 的显卡啊! 又要重新编译内核, 重新编译驱动 各种编译, 删 nvidia , 删 cuda ...

最后驱动安装完毕, KDE 重新进去的时候, 发现了一个惊人的事实, AMD 的显卡延迟比 nvidia 的低!

这是怎么一回事呢?

原来事情是在  glXSwapbuffers 的实现上. nvidia 的实现策略, 导致 kwin 最终呈现在显示器上的图像是4帧前的世界.  app 调用 swapbuffer 刷新界面后, 本来就引入了2帧的延迟了, 而 kwin 获得新的窗口内容后 , 合成到屏幕上, 再次使用 swapbuffer 刷新, 还要再引入2帧延迟, 结果就是总4帧的延迟. 禁用 compositor 后延迟就缩短到2帧.

而 AMD 的驱动, 开源的, 没有这个迟来迟去的 bug. 其实 nvidia 根本不认为是 bug 他认为这是让显卡帧率提高的 feature. 诶.









