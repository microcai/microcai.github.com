---
layout: post
title: 路由口和交换口
tags: [network]
---

很久以前，我买路由器非常关心路由器有几个口。但是我最终发现，其实路由器都只有2个口。
一个 WAN 口一个LAN口。哪怕是一些双WAN的路由器，其实也只有3个口，2个WAN口一个LAN口而已。

至于你看到的4个LAN口，那不是口，那只是内置了一个交换机。

说道这，就得科普一下 路由口和交换口 的区别。

所谓交换口，就是一个2层可以通的RJ45口。而路由口，才是可以配置 IP 地址的口,路由口才能做三层转发.

一般路由器只有2个口，一个WAN口，DHCP获取或者PPPOE获取，一个 LAN 口，固定ip，并可以为下面的机器提供 DHCP。 LAN 口通过交换机扩展出多个交换口。

交换口是不值钱的。一个 8LAN 口的和 4 LAN 口的路由器，成本差距微乎其微额。因为本质上这个路由器只是双口路由器，只是内置的交换机4口还是8口的区别。

而交换机，这种口这么少的，是不值钱的。不信自己上马云家找找看。几十块钱就能买到8个口的交换机。还是8个千兆口的。8LAN口的通常还只是百兆口。

路由口才值钱。真的路由器，上有5个口，才真的是贵的很呢。

在路由器市场，杀出了一个叫 Ubnt 的公司，简直就是杀价神，小米在它眼里简直不知道 low 到哪里去了。

他最新被众人注意到，是因为推出了一个 3 口路由器 ER-Lite。注意我上面说的路由口和交换口的区别。这个是3个路由口的路由器。还支持千兆线速转发。价钱居然不到一百美金。简直是价格屠夫。

但是这不是重点，重点是没多久它又推出了一个5口路由器 ERX 。价格 49美刀！
注意是5个路由口哦！ ER-PRO 也有5 个口，但是其实后面3个口是在一个交换机上的，本质是3个路由口。

哦，为啥比3口的还便宜，因为虽然有5个路由口，但是包转发率下来了。虽然下来了，但是如果发的是大包而不是小包，那跑千兆还是绰绰有余的。只是跑小包就达不到千兆了，也就是所谓的无法线速转发。

但是家庭使用，在需要速度的地方（NAS，迅雷下载），必定是大包转发。所以，就是个49美元能买到的5个路由口的机器啊！简直是价格屠夫。要知道老 思科 那些百兆的5口路由器二手都不止 49美元呢！虽然能线速百兆，问题是也才百兆而已。

虽然说有5个口，意味着5个网络，家里一般就一个 wan 一个 lan ，哪里用得到5个？
抛开有的人要双拨，然后不同设备组到不同的网段里不谈，大部分人其实只需要双口路由器的。
这种情况下，他也提供了把任意的口划到一个交换组里的功能。 划到交换组里的口就不能设置 ip地址了，不过可以统一给这个交换组设置一个ip。划到交换组里的口，进行二层包转发的时候，也是会使用独立的交换芯片进行，不占用cpu的资源。

物理上这是个单芯片的路由器，但是逻辑上，芯片上除了cpu，还集成了5个网卡和一个交换机的。 5个 RJ45 的 phy 接口可以随意的配置为接入交换机或者接入网卡。所以接入交换机后，就不受他的标称包转发速率的影响的，其实也是个线速转发的5口交换芯片。

不过这个价钱你肯定不会把他当个交换机的，当然是5个网段搞起咯。扩展端口什么的，用个额外的交换机就可以啦！


